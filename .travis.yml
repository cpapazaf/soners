language: python
python:
    - 3.4
install:
    - pip install -r requirements-dev.txt
    - pip install .
deploy:
    # test pypi
  - provider: pypi
    distributions: sdist
    server: https://testpypi.python.org/pypi
    user: cpapazaf
    password:
      secure: fvJDtjW8nP1sjgYACbcDIxVy3W3c6mQI3oKNnbIGlvUIMkqEQW0xgsyc6oMOxqULvqUNeFdLbGi89dUptJ7nyAV23AcG8YmTzhwYdgAQSSGMEveaAgqLwO2VKbeCDwSTPDcdPQerT++Lu9xSzQBO0M+kdvf5pkPL0TPz0nk95ECUOvj4SxC6uYB15RXmj5zcOvIWYMcNjcgyiE1GtyPJm03dQJQy6jphm23+zUR0XffoxDx4R0oJVLMZVvGKCLSolraLmqOBhxG5ePKdS+eKXXsAWZ4JTuHINwlIzkx8xoJGqkjOxM60opgkXtfosxTf4xcVk9hj32VFWMwjoYBACXPIu5rsfyFo0XZ95QGenSqcRJm7KDo6+PaevBG86ya9Hi7bhMbjgqwUMSJZ5hG3wUxT5gJjvWuC/0lxK9iHjSJFRuu8aFaNcX9lproU/fgx0EMMqLWkNGVcdqxdKPtkFnOEnLdaDgRFw37CKprGk0kbug7C6r0F4o25PIk1m85UwW4GJqMsTyF4EKIhYIz/QV4iHNNGG1zWxT0YemIY6oNnpifBiTamMPM4NA5A0dcQOuyHi2BMUBSLs2cDNJLf6fF6jXomv/8trLzaUPawvh4LxZdkd7uwKb79w13WLghsT3PMZdtXb/e0eHFv14VO3kvImHfMz6N19PT0ImU1ssQ= 
    on:
      tags: false
      branch: master
script:
  - py.test --cov-report= --cov=soners soners/test/*
  - pylama .
after_success:
  - coverals
  - if [ $TRAVIS_TAG ]; then curl -X POST https://readthedocs.org/build/soners; fi
